/*!
 * FullCalendar v1.6.4
 * Docs & License: http://arshaw.com/fullcalendar/
 * (c) 2013 Adam Shaw
 */
(function(t,e){function n(e){t.extend(!0,ze,e)}function r(n,r,u){function f(t){se?m()&&(T(),S(t)):d()}function d(){le=r.theme?"ui":"fc",n.addClass("fc"),r.isRTL?n.addClass("fc-rtl"):n.addClass("fc-ltr"),r.theme&&n.addClass("ui-widget"),se=t("<div class='fc-content' style='position:relative'/>").prependTo(n),oe=new a(ne,r),ie=oe.render(),ie&&n.prepend(ie),b(r.defaultView),r.handleWindowResize&&t(window).resize(k),y()||h()}function h(){setTimeout(function(){!ce.start&&y()&&C()},0)}function g(){ce&&(ee("viewDestroy",ce,ce,ce.element),ce.triggerEventDestroy()),t(window).unbind("resize",k),oe.destroy(),se.remove(),n.removeClass("fc fc-rtl ui-widget")}function m(){return n.is(":visible")}function y(){return t("body").is(":visible")}function b(t){ce&&t==ce.name||M(t)}function M(e){ge++,ce&&(ee("viewDestroy",ce,ce,ce.element),j(),ce.triggerEventDestroy(),$(),ce.element.remove(),oe.deactivateButton(ce.name)),oe.activateButton(e),ce=new Oe[e](t("<div class='fc-view fc-view-"+e+"' style='position:relative'/>").appendTo(se),ne),C(),Q(),ge--}function C(t){(!ce.start||t||ce.start>pe||pe>=ce.end)&&m()&&S(t)}function S(t){ge++,ce.start&&(ee("viewDestroy",ce,ce,ce.element),j(),z()),$(),ce.render(pe,t||0),x(),Q(),(ce.afterRender||I)(),_(),q(),ee("viewRender",ce,ce,ce.element),ce.trigger("viewDisplay",ve),ge--,N()}function E(){m()&&(j(),z(),T(),x(),F())}function T(){fe=r.contentHeight?r.contentHeight:r.height?r.height-(ie?ie.height():0)-L(se):Math.round(se.width()/Math.max(r.aspectRatio,.5))}function x(){fe===e&&T(),ge++,ce.setHeight(fe),ce.setWidth(se.width()),ge--,ue=n.outerWidth()}function k(){if(!ge)if(ce.start){var t=++he;setTimeout(function(){t==he&&!ge&&m()&&ue!=(ue=n.outerWidth())&&(ge++,E(),ce.trigger("windowResize",ve),ge--)},200)}else h()}function H(){z(),W()}function R(t){z(),F(t)}function F(t){m()&&(ce.setEventData(me),ce.renderEvents(me,t),ce.trigger("eventAfterAllRender"))}function z(){ce.triggerEventDestroy(),ce.clearEvents(),ce.clearEventData()}function N(){!r.lazyFetching||re(ce.visStart,ce.visEnd)?W():F()}function W(){ae(ce.visStart,ce.visEnd)}function O(t){me=t,F()}function A(t){R(t)}function _(){oe.updateTitle(ce.title)}function q(){var t=new Date;t>=ce.start&&ce.end>t?oe.disableButton("today"):oe.enableButton("today")}function P(t,n,r){ce.select(t,n,r===e?!0:r)}function j(){ce&&ce.unselect()}function B(){C(-1)}function Y(){C(1)}function X(){s(pe,-1),C()}function J(){s(pe,1),C()}function V(){pe=new Date,C()}function U(t,e,n){t instanceof Date?pe=v(t):p(pe,t,e,n),C()}function Z(t,n,r){t!==e&&s(pe,t),n!==e&&l(pe,n),r!==e&&c(pe,r),C()}function G(){return v(pe)}function $(){se.css({width:"100%",height:se.height(),overflow:"hidden"})}function Q(){se.css({width:"",height:"",overflow:""})}function K(){return ce}function te(t,n){return n===e?r[t]:(("height"==t||"contentHeight"==t||"aspectRatio"==t)&&(r[t]=n,E()),e)}function ee(t,n){return r[t]?r[t].apply(n||ve,Array.prototype.slice.call(arguments,2)):e}var ne=this;ne.options=r,ne.render=f,ne.destroy=g,ne.refetchEvents=H,ne.reportEvents=O,ne.reportEventChange=A,ne.rerenderEvents=R,ne.changeView=b,ne.select=P,ne.unselect=j,ne.prev=B,ne.next=Y,ne.prevYear=X,ne.nextYear=J,ne.today=V,ne.gotoDate=U,ne.incrementDate=Z,ne.formatDate=function(t,e){return w(t,e,r)},ne.formatDates=function(t,e,n){return D(t,e,n,r)},ne.getDate=G,ne.getView=K,ne.option=te,ne.trigger=ee,o.call(ne,r,u);var re=ne.isFetchNeeded,ae=ne.fetchEvents;i.call(ne,r);var oe,ie,se,le,ce,ue,fe,de,ve=n[0],he=0,ge=0,pe=new Date,me=[];p(pe,r.year,r.month,r.date),r.droppable&&t(document).bind("dragstart",function(e,n){var a=e.target,o=t(a);if(!o.parents(".fc").length){var i=r.dropAccept;(t.isFunction(i)?i.call(a,o):o.is(i))&&(de=a,ce.dragStart(de,e,n))}}).bind("dragstop",function(t,e){de&&(ce.dragStop(de,t,e),de=null)})}function a(n,r){function a(){v=r.theme?"ui":"fc";var n=r.header;return n?h=t("<table class='fc-header' style='width:100%'/>").append(t("<tr/>").append(i("left")).append(i("center")).append(i("right"))):e}function o(){h.remove()}function i(e){var a=t("<td class='fc-header-"+e+"'/>"),o=r.header[e];return o&&t.each(o.split(" "),function(e){e>0&&a.append("<span class='fc-header-space'/>");var o;t.each(this.split(","),function(e,i){if("title"==i)a.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),o&&o.addClass(v+"-corner-right"),o=null;else{var s;if(n[i]?s=n[i]:Oe[i]&&(s=function(){u.removeClass(v+"-state-hover"),n.changeView(i)}),s){var l=r.theme?Y(r.buttonIcons,i):null,c=Y(r.buttonText,i),u=t("<span class='fc-button fc-button-"+i+" "+v+"-state-default'>"+(l?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+l+"'/>"+"</span>":c)+"</span>").click(function(){u.hasClass(v+"-state-disabled")||s()}).mousedown(function(){u.not("."+v+"-state-active").not("."+v+"-state-disabled").addClass(v+"-state-down")}).mouseup(function(){u.removeClass(v+"-state-down")}).hover(function(){u.not("."+v+"-state-active").not("."+v+"-state-disabled").addClass(v+"-state-hover")},function(){u.removeClass(v+"-state-hover").removeClass(v+"-state-down")}).appendTo(a);V(u),o||u.addClass(v+"-corner-left"),o=u}}}),o&&o.addClass(v+"-corner-right")}),a}function s(t){h.find("h2").html(t)}function l(t){h.find("span.fc-button-"+t).addClass(v+"-state-active")}function c(t){h.find("span.fc-button-"+t).removeClass(v+"-state-active")}function u(t){h.find("span.fc-button-"+t).addClass(v+"-state-disabled")}function f(t){h.find("span.fc-button-"+t).removeClass(v+"-state-disabled")}var d=this;d.render=a,d.destroy=o,d.updateTitle=s,d.activateButton=l,d.deactivateButton=c,d.disableButton=u,d.enableButton=f;var v,h=t([])}function o(n,r){function a(t,e){return!S||S>t||e>E}function o(t,e){S=t,E=e,W=[];var n=++F,r=R.length;z=r;for(var a=0;r>a;a++)i(R[a],n)}function i(e,r){s(e,function(a){if(r==F){if(a){n.eventDataTransform&&(a=t.map(a,n.eventDataTransform)),e.eventDataTransform&&(a=t.map(a,e.eventDataTransform));for(var o=0;a.length>o;o++)a[o].source=e,b(a[o]);W=W.concat(a)}z--,z||k(W)}})}function s(r,a){var o,i,l=We.sourceFetchers;for(o=0;l.length>o;o++){if(i=l[o](r,S,E,a),i===!0)return;if("object"==typeof i)return s(i,a),e}var c=r.events;if(c)t.isFunction(c)?(p(),c(v(S),v(E),function(t){a(t),y()})):t.isArray(c)?a(c):a();else{var u=r.url;if(u){var f,d=r.success,h=r.error,g=r.complete;f=t.isFunction(r.data)?r.data():r.data;var m=t.extend({},f||{}),b=Q(r.startParam,n.startParam),w=Q(r.endParam,n.endParam);b&&(m[b]=Math.round(+S/1e3)),w&&(m[w]=Math.round(+E/1e3)),p(),t.ajax(t.extend({},Le,r,{data:m,success:function(e){e=e||[];var n=$(d,this,arguments);t.isArray(n)&&(e=n),a(e)},error:function(){$(h,this,arguments),a()},complete:function(){$(g,this,arguments),y()}}))}else a()}}function l(t){t=c(t),t&&(z++,i(t,F))}function c(n){return t.isFunction(n)||t.isArray(n)?n={events:n}:"string"==typeof n&&(n={url:n}),"object"==typeof n?(w(n),R.push(n),n):e}function u(e){R=t.grep(R,function(t){return!D(t,e)}),W=t.grep(W,function(t){return!D(t.source,e)}),k(W)}function f(t){var e,n,r=W.length,a=x().defaultEventEnd,o=t.start-t._start,i=t.end?t.end-(t._end||a(t)):0;for(e=0;r>e;e++)n=W[e],n._id==t._id&&n!=t&&(n.start=new Date(+n.start+o),n.end=t.end?n.end?new Date(+n.end+i):new Date(+a(n)+i):null,n.title=t.title,n.url=t.url,n.allDay=t.allDay,n.className=t.className,n.editable=t.editable,n.color=t.color,n.backgroundColor=t.backgroundColor,n.borderColor=t.borderColor,n.textColor=t.textColor,b(n));b(t),k(W)}function d(t,e){b(t),t.source||(e&&(H.events.push(t),t.source=H),W.push(t)),k(W)}function h(e){if(e){if(!t.isFunction(e)){var n=e+"";e=function(t){return t._id==n}}W=t.grep(W,e,!0);for(var r=0;R.length>r;r++)t.isArray(R[r].events)&&(R[r].events=t.grep(R[r].events,e,!0))}else{W=[];for(var r=0;R.length>r;r++)t.isArray(R[r].events)&&(R[r].events=[])}k(W)}function g(e){return t.isFunction(e)?t.grep(W,e):e?(e+="",t.grep(W,function(t){return t._id==e})):W}function p(){N++||T("loading",null,!0,x())}function y(){--N||T("loading",null,!1,x())}function b(t){var r=t.source||{},a=Q(r.ignoreTimezone,n.ignoreTimezone);t._id=t._id||(t.id===e?"_fc"+Ae++:t.id+""),t.date&&(t.start||(t.start=t.date),delete t.date),t._start=v(t.start=m(t.start,a)),t.end=m(t.end,a),t.end&&t.end<=t.start&&(t.end=null),t._end=t.end?v(t.end):null,t.allDay===e&&(t.allDay=Q(r.allDayDefault,n.allDayDefault)),t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[]}function w(t){t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[];for(var e=We.sourceNormalizers,n=0;e.length>n;n++)e[n](t)}function D(t,e){return t&&e&&M(t)==M(e)}function M(t){return("object"==typeof t?t.events||t.url:"")||t}var C=this;C.isFetchNeeded=a,C.fetchEvents=o,C.addEventSource=l,C.removeEventSource=u,C.updateEvent=f,C.renderEvent=d,C.removeEvents=h,C.clientEvents=g,C.normalizeEvent=b;for(var S,E,T=C.trigger,x=C.getView,k=C.reportEvents,H={events:[]},R=[H],F=0,z=0,N=0,W=[],O=0;r.length>O;O++)c(r[O])}function i(n){function r(e){var n={};if(t.isFunction(e))n={resources:e},c.push(n);else if("string"==typeof e)n={url:e},c.push(n);else if("object"==typeof e)for(var r=0;e.length>r;r++){var a=e[r];i(a),n={resources:a},c.push(n)}}function a(t){if(t=t!==e?t:!0,l!=e&&t)return l;l=[];for(var n=c.length,r=0;n>r;r++){var a=o(c[r]);l=l.concat(a)}return l}function o(e){var n=e.resources;if(n){if(t.isFunction(n))return n()}else{var r=e.url;r&&t.ajax({url:r,dataType:"json",cache:!1,success:function(t){t=t||[],n=t},error:function(){alert("ajax error")},async:!1})}return n}function i(t){t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[];for(var e=We.sourceNormalizers,n=0;e.length>n;n++)e[n](t)}var s=this;s.fetchResources=a;var l,c=[];r(n.resources)}function s(t,e,n){return t.setFullYear(t.getFullYear()+e),n||d(t),t}function l(t,e,n){if(+t){var r=t.getMonth()+e,a=v(t);for(a.setDate(1),a.setMonth(r),t.setMonth(r),n||d(t);t.getMonth()!=a.getMonth();)t.setDate(t.getDate()+(a>t?1:-1))}return t}function c(t,e,n){if(+t){var r=t.getDate()+e,a=v(t);a.setHours(9),a.setDate(r),t.setDate(r),n||d(t),u(t,a)}return t}function u(t,e){if(+t)for(;t.getDate()!=e.getDate();)t.setTime(+t+(e>t?1:-1)*Ie)}function f(t,e){return t.setMinutes(t.getMinutes()+e),t}function d(t){return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t}function v(t,e){return e?d(new Date(+t)):new Date(+t)}function h(){var t,e=0;do t=new Date(1970,e++,1);while(t.getHours());return t}function g(t,e){return Math.round((v(t,!0)-v(e,!0))/qe)}function p(t,n,r,a){n!==e&&n!=t.getFullYear()&&(t.setDate(1),t.setMonth(0),t.setFullYear(n)),r!==e&&r!=t.getMonth()&&(t.setDate(1),t.setMonth(r)),a!==e&&t.setDate(a)}function m(t,n){return"object"==typeof t?t:"number"==typeof t?new Date(1e3*t):"string"==typeof t?t.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(t)):(n===e&&(n=!0),y(t,n)||(t?new Date(t):null)):null}function y(t,e){var n=t.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!n)return null;var r=new Date(n[1],0,1);if(e||!n[13]){var a=new Date(n[1],0,1,9,0);n[3]&&(r.setMonth(n[3]-1),a.setMonth(n[3]-1)),n[5]&&(r.setDate(n[5]),a.setDate(n[5])),u(r,a),n[7]&&r.setHours(n[7]),n[8]&&r.setMinutes(n[8]),n[10]&&r.setSeconds(n[10]),n[12]&&r.setMilliseconds(1e3*Number("0."+n[12])),u(r,a)}else if(r.setUTCFullYear(n[1],n[3]?n[3]-1:0,n[5]||1),r.setUTCHours(n[7]||0,n[8]||0,n[10]||0,n[12]?1e3*Number("0."+n[12]):0),n[14]){var o=60*Number(n[16])+(n[18]?Number(n[18]):0);o*="-"==n[15]?1:-1,r=new Date(+r+1e3*60*o)}return r}function b(t){if("number"==typeof t)return 60*t;if("object"==typeof t)return 60*t.getHours()+t.getMinutes();var e=t.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(e){var n=parseInt(e[1],10);return e[3]&&(n%=12,"p"==e[3].toLowerCase().charAt(0)&&(n+=12)),60*n+(e[2]?parseInt(e[2],10):0)}}function w(t,e,n){return D(t,null,e,n)}function D(t,e,n,r){r=r||ze;var a,o,i,s,l=t,c=e,u=n.length,f="";for(a=0;u>a;a++)if(o=n.charAt(a),"'"==o){for(i=a+1;u>i;i++)if("'"==n.charAt(i)){l&&(f+=i==a+1?"'":n.substring(a+1,i),a=i);break}}else if("("==o){for(i=a+1;u>i;i++)if(")"==n.charAt(i)){var d=w(l,n.substring(a+1,i),r);parseInt(d.replace(/\D/,""),10)&&(f+=d),a=i;break}}else if("["==o){for(i=a+1;u>i;i++)if("]"==n.charAt(i)){var v=n.substring(a+1,i),d=w(l,v,r);d!=w(c,v,r)&&(f+=d),a=i;break}}else if("{"==o)l=e,c=t;else if("}"==o)l=t,c=e;else{for(i=u;i>a;i--)if(s=je[n.substring(a,i)]){l&&(f+=s(l,r)),a=i-1;break}i==a&&l&&(f+=o)}return f}function M(t){var e,n=new Date(t.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),e=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((e-n)/864e5)/7)+1}function C(t){return t.end?S(t.end,t.allDay):c(v(t.start),1)}function S(t,e){return t=v(t),e||t.getHours()||t.getMinutes()?c(t,1):d(t)}function C(t){return t.end?S(t.end,t.allDay):c(v(t.start),1)}function E(t,e){return 100*(e.msLength-t.msLength)+(t.event.start-e.event.start)}function T(t,e){return t.end>e.start&&t.start<e.end}function x(t,e,n,r){var a,o,i,s,l,c,u,f,d=[],h=t.length;for(a=0;h>a;a++)o=t[a],i=o.start,s=e[a],s>n&&r>i&&(n>i?(l=v(n),u=!1):(l=i,u=!0),s>r?(c=v(r),f=!1):(c=s,f=!0),d.push({event:o,start:l,end:c,isStart:u,isEnd:f,msLength:c-l}));return d.sort(E)}function k(t){var e,n,r,a,o,i=[],s=t.length;for(e=0;s>e;e++){for(n=t[e],r=0;;){if(a=!1,i[r])for(o=0;i[r].length>o;o++)if(T(i[r][o],n)){a=!0;break}if(!a)break;r++}i[r]?i[r].push(n):i[r]=[n]}return i}function H(n,r,a){n.unbind("mouseover").mouseover(function(n){for(var o,i,s,l=n.target;l!=this;)o=l,l=l.parentNode;(i=o._fci)!==e&&(o._fci=e,s=r[i],a(s.event,s.element,s),t(n.target).trigger(n)),n.stopPropagation()})}function R(e,n,r){for(var a,o=0;e.length>o;o++)a=t(e[o]),a.width(Math.max(0,n-z(a,r)))}function F(e,n,r){for(var a,o=0;e.length>o;o++)a=t(e[o]),a.height(Math.max(0,n-L(a,r)))}function z(t,e){return N(t)+O(t)+(e?W(t):0)}function N(e){return(parseFloat(t.css(e[0],"paddingLeft",!0))||0)+(parseFloat(t.css(e[0],"paddingRight",!0))||0)}function W(e){return(parseFloat(t.css(e[0],"marginLeft",!0))||0)+(parseFloat(t.css(e[0],"marginRight",!0))||0)}function O(e){return(parseFloat(t.css(e[0],"borderLeftWidth",!0))||0)+(parseFloat(t.css(e[0],"borderRightWidth",!0))||0)}function L(t,e){return A(t)+q(t)+(e?_(t):0)}function A(e){return(parseFloat(t.css(e[0],"paddingTop",!0))||0)+(parseFloat(t.css(e[0],"paddingBottom",!0))||0)}function _(e){return(parseFloat(t.css(e[0],"marginTop",!0))||0)+(parseFloat(t.css(e[0],"marginBottom",!0))||0)}function q(e){return(parseFloat(t.css(e[0],"borderTopWidth",!0))||0)+(parseFloat(t.css(e[0],"borderBottomWidth",!0))||0)}function I(){}function P(t,e){return t-e}function j(t){return Math.max.apply(Math,t)}function B(t){return(10>t?"0":"")+t}function Y(t,n){if(t[n]!==e)return t[n];for(var r,a=n.split(/(?=[A-Z])/),o=a.length-1;o>=0;o--)if(r=t[a[o].toLowerCase()],r!==e)return r;return t[""]}function X(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function J(t){return t.id+"/"+t.className+"/"+t.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/gi,"")}function V(t){t.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function U(t){t.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function Z(t,e){t.each(function(t,n){n.className=n.className.replace(/^fc-\w*/,"fc-"+_e[e.getDay()])})}function G(t,e){var n=t.source||{},r=t.color,a=n.color,o=e("eventColor"),i=t.backgroundColor||r||n.backgroundColor||a||e("eventBackgroundColor")||o,s=t.borderColor||r||n.borderColor||a||e("eventBorderColor")||o,l=t.textColor||n.textColor||e("eventTextColor"),c=[];return i&&c.push("background-color:"+i),s&&c.push("border-color:"+s),l&&c.push("color:"+l),c.join(";")}function $(e,n,r){if(t.isFunction(e)&&(e=[e]),e){var a,o;for(a=0;e.length>a;a++)o=e[a].apply(n,r)||o;return o}}function Q(){for(var t=0;arguments.length>t;t++)if(arguments[t]!==e)return arguments[t]}function K(t,e){function n(t,e){e&&(l(t,e),t.setDate(1));var n=a("firstDay"),f=v(t,!0);f.setDate(1);var d=l(v(f),1),h=v(f);c(h,-((h.getDay()-n+7)%7)),i(h);var p=v(d);c(p,(7-p.getDay()+n)%7),i(p,-1,!0);var m=s(),y=Math.round(g(p,h)/7);"fixed"==a("weekMode")&&(c(p,7*(6-y)),y=6),r.title=u(f,a("titleFormat")),r.start=f,r.end=d,r.visStart=h,r.visEnd=p,o(y,m,!0)}var r=this;r.render=n,ne.call(r,t,e,"month");var a=r.opt,o=r.renderBasic,i=r.skipHiddenDays,s=r.getCellsPerWeek,u=e.formatDate}function te(t,e){function n(t,e){e&&c(t,7*e);var n=c(v(t),-((t.getDay()-a("firstDay")+7)%7)),u=c(v(n),7),f=v(n);i(f);var d=v(u);i(d,-1,!0);var h=s();r.start=n,r.end=u,r.visStart=f,r.visEnd=d,r.title=l(f,c(v(d),-1),a("titleFormat")),o(1,h,!1)}var r=this;r.render=n,ne.call(r,t,e,"basicWeek");var a=r.opt,o=r.renderBasic,i=r.skipHiddenDays,s=r.getCellsPerWeek,l=e.formatDates}function ee(t,e){function n(t,e){e&&c(t,e),i(t,0>e?-1:1);var n=v(t,!0),l=c(v(n),1);r.title=s(t,a("titleFormat")),r.start=r.visStart=n,r.end=r.visEnd=l,o(1,1,!1)}var r=this;r.render=n,ne.call(r,t,e,"basicDay");var a=r.opt,o=r.renderBasic,i=r.skipHiddenDays,s=e.formatDate}function ne(e,n,r){function a(t,e,n){te=t,ee=e,ne=n,o(),I||i(),s()}function o(){le=ve("theme")?"ui":"fc",ce=ve("columnFormat"),ue=ve("weekNumbers"),fe=ve("weekNumberTitle"),de="iso"!=ve("weekNumberCalculation")?"w":"W"}function i(){Z=t("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(e)}function s(){var n=l();A&&A.remove(),A=t(n).appendTo(e),_=A.find("thead"),q=_.find(".fc-day-header"),I=A.find("tbody"),P=I.find("tr"),j=I.find(".fc-day"),B=P.find("td:first-child"),Y=P.eq(0).find(".fc-day > div"),J=P.eq(0).find(".fc-day-content > div"),U(_.add(_.find("tr"))),U(P),P.eq(0).addClass("fc-first"),P.filter(":last").addClass("fc-last"),j.each(function(e,n){var r=ye(Math.floor(e/ee),e%ee);he("dayRender",O,r,t(n))}),m(j)}function l(){var t="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+u()+f()+"</table>";return t}function u(){var t,e,n=le+"-widget-header",r="";for(r+="<thead><tr>",ue&&(r+="<th class='fc-week-number "+n+"'>"+X(fe)+"</th>"),t=0;ee>t;t++)e=ye(0,t),r+="<th class='fc-day-header fc-"+_e[e.getDay()]+" "+n+"'>"+X(Me(e,ce))+"</th>";return r+="</tr></thead>"}function f(){var t,e,n,r=le+"-widget-content",a="";for(a+="<tbody>",t=0;te>t;t++){for(a+="<tr class='fc-week'>",ue&&(n=ye(t,0),a+="<td class='fc-week-number "+r+"'>"+"<div>"+X(Me(n,de))+"</div>"+"</td>"),e=0;ee>e;e++)n=ye(t,e),a+=h(n);a+="</tr>"}return a+="</tbody>"}function h(t){var e=le+"-widget-content",n=O.start.getMonth(),r=d(new Date),a="",o=["fc-day","fc-"+_e[t.getDay()],e];return t.getMonth()!=n&&o.push("fc-other-month"),+t==+r?o.push("fc-today",le+"-state-highlight"):r>t?o.push("fc-past"):o.push("fc-future"),a+="<td class='"+o.join(" ")+"'"+" data-date='"+Me(t,"yyyy-MM-dd")+"'"+">"+"<div>",ne&&(a+="<div class='fc-day-number'>"+t.getDate()+"</div>"),a+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}function g(e){$=e;var n,r,a,o=$-_.height();"variable"==ve("weekMode")?n=r=Math.floor(o/(1==te?2:6)):(n=Math.floor(o/te),r=o-n*(te-1)),B.each(function(e,o){te>e&&(a=t(o),a.find("> div").css("min-height",(e==te-1?r:n)-L(a)))})}function p(t){G=t,ie.clear(),se.clear(),K=0,ue&&(K=_.find("th.fc-week-number").outerWidth()),Q=Math.floor((G-K)/ee),R(q.slice(0,-1),Q)}function m(t){t.click(b).mousedown(me)}function b(e){if(!ve("selectable")){var n=y(t(this).data("date"));he("dayClick",this,n,!0,e)}}function w(t,e,n){n&&ae.build();for(var r=we(t,e),a=0;r.length>a;a++){var o=r[a];m(D(o.row,o.leftCol,o.row,o.rightCol))}}function D(t,n,r,a){var o=ae.rect(t,n,r,a,e);return ge(o,e)}function M(t){return v(t)}function C(t,e){w(t,c(v(e),1),!0)}function S(){pe()}function E(t,e,n){var r=be(t),a=j[r.row*ee+r.col];he("dayClick",a,t,e,n)}function T(t,e){oe.start(function(t){pe(),t&&D(t.row,t.col,t.row,t.col)},e)}function x(t,e,n){var r=oe.stop();if(pe(),r){var a=ye(r);he("drop",t,a,!0,e,n)}}function k(t){return v(t.start)}function H(t){return ie.left(t)}function F(t){return ie.right(t)}function z(t){return se.left(t)}function N(t){return se.right(t)}function W(t){return P.eq(t)}var O=this;O.renderBasic=a,O.setHeight=g,O.setWidth=p,O.renderDayOverlay=w,O.defaultSelectionEnd=M,O.renderSelection=C,O.clearSelection=S,O.reportDayClick=E,O.dragStart=T,O.dragStop=x,O.defaultEventEnd=k,O.getHoverListener=function(){return oe},O.colLeft=H,O.colRight=F,O.colContentLeft=z,O.colContentRight=N,O.getIsCellAllDay=function(){return!0},O.allDayRow=W,O.getRowCnt=function(){return te},O.getColCnt=function(){return ee},O.getColWidth=function(){return Q},O.getDaySegmentContainer=function(){return Z},De.call(O,e,n,r),xe.call(O),Te.call(O),re.call(O);var A,_,q,I,P,j,B,Y,J,Z,G,$,Q,K,te,ee,ne,ae,oe,ie,se,le,ce,ue,fe,de,ve=O.opt,he=O.trigger,ge=O.renderOverlay,pe=O.clearOverlays,me=O.daySelectionMousedown,ye=O.cellToDate,be=O.dateToCell,we=O.rangeToSegments,Me=n.formatDate;V(e.addClass("fc-grid")),ae=new ke(function(e,n){var r,a,o;q.each(function(e,i){r=t(i),a=r.offset().left,e&&(o[1]=a),o=[a],n[e]=o}),o[1]=a+r.outerWidth(),P.each(function(n,i){te>n&&(r=t(i),a=r.offset().top,n&&(o[1]=a),o=[a],e[n]=o)}),o[1]=a+r.outerHeight()}),oe=new He(ae),ie=new Fe(function(t){return Y.eq(t)}),se=new Fe(function(t){return J.eq(t)})}function re(){function t(t,e){n.renderDayEvents(t,e)}function e(){n.getDaySegmentContainer().empty()}var n=this;n.renderEvents=t,n.clearEvents=e,Me.call(n)}function ae(t,e){function n(t,e){e&&c(t,7*e);var n=c(v(t),-((t.getDay()-a("firstDay")+7)%7)),u=c(v(n),7),f=v(n);i(f);var d=v(u);i(d,-1,!0);var h=s();r.title=l(f,c(v(d),-1),a("titleFormat")),r.start=n,r.end=u,r.visStart=f,r.visEnd=d,o(h)}var r=this;r.render=n,ie.call(r,t,e,"agendaWeek");var a=r.opt,o=r.renderAgenda,i=r.skipHiddenDays,s=r.getCellsPerWeek,l=e.formatDates}function oe(t,e){function n(t,e){e&&c(t,e),i(t,0>e?-1:1);var n=v(t,!0),l=c(v(n),1);r.title=s(t,a("titleFormat")),r.start=r.visStart=n,r.end=r.visEnd=l,o(1)}var r=this;r.render=n,ie.call(r,t,e,"agendaDay");var a=r.opt,o=r.renderAgenda,i=r.skipHiddenDays,s=e.formatDate}function ie(n,r,a){function o(t){Ne=t,i(),K?l():s()}function i(){Ie=Ue("theme")?"ui":"fc",Pe=Ue("isRTL"),je=b(Ue("minTime")),Be=b(Ue("maxTime")),Ye=Ue("columnFormat"),Xe=Ue("weekNumbers"),Je=Ue("weekNumberTitle"),Ve="iso"!=Ue("weekNumberCalculation")?"w":"W",Ee=Ue("snapMinutes")||Ue("slotMinutes")}function s(){var e,r,a,o,i,s=Ie+"-widget-header",c=Ie+"-widget-content",u=0==Ue("slotMinutes")%15;for(l(),ce=t("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(n),Ue("allDaySlot")?(ue=t("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ce),e="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+s+" fc-agenda-axis'>"+Ue("allDayText")+"</th>"+"<td>"+"<div class='fc-day-content'><div style='position:relative'/></div>"+"</td>"+"<th class='"+s+" fc-agenda-gutter'>&nbsp;</th>"+"</tr>"+"</table>",fe=t(e).appendTo(ce),de=fe.find("tr"),M(de.find("td")),ce.append("<div class='fc-agenda-divider "+s+"'>"+"<div class='fc-agenda-divider-inner'/>"+"</div>")):ue=t([]),ve=t("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(ce),he=t("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(ve),ge=t("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(he),e="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",r=h(),o=f(v(r),Be),f(r,je),We=0,a=0;o>r;a++)i=r.getMinutes(),e+="<tr class='fc-slot"+a+" "+(i?"fc-minor":"")+"'>"+"<th class='fc-agenda-axis "+s+"'>"+(u&&i?"&nbsp;":on(r,Ue("axisFormat")))+"</th>"+"<td class='"+c+"'>"+"<div style='position:relative'>&nbsp;</div>"+"</td>"+"</tr>",f(r,Ue("slotMinutes")),We++;e+="</tbody></table>",pe=t(e).appendTo(he),C(pe.find("td"))}function l(){var e=u();K&&K.remove(),K=t(e).appendTo(n),te=K.find("thead"),ee=te.find("th").slice(1,-1),ne=K.find("tbody"),re=ne.find("td").slice(0,-1),ae=re.find("> div"),oe=re.find(".fc-day-content > div"),ie=re.eq(0),le=ae.eq(0),U(te.add(te.find("tr"))),U(ne.add(ne.find("tr")))}function u(){var t="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+g()+p()+"</table>";return t}function g(){var t,e,n,r=Ie+"-widget-header",a="";for(a+="<thead><tr>",Xe?(t=nn(0,0),e=on(t,Ve),Pe?e+=Je:e=Je+e,a+="<th class='fc-agenda-axis fc-week-number "+r+"'>"+X(e)+"</th>"):a+="<th class='fc-agenda-axis "+r+"'>&nbsp;</th>",n=0;Ne>n;n++)t=nn(0,n),a+="<th class='fc-"+_e[t.getDay()]+" fc-col"+n+" "+r+"'>"+X(on(t,Ye))+"</th>";return a+="<th class='fc-agenda-gutter "+r+"'>&nbsp;</th>"+"</tr>"+"</thead>"}function p(){var t,e,n,r,a,o=Ie+"-widget-header",i=Ie+"-widget-content",s=d(new Date),l="";for(l+="<tbody><tr><th class='fc-agenda-axis "+o+"'>&nbsp;</th>",n="",e=0;Ne>e;e++)t=nn(0,e),a=["fc-col"+e,"fc-"+_e[t.getDay()],i],+t==+s?a.push(Ie+"-state-highlight","fc-today"):s>t?a.push("fc-past"):a.push("fc-future"),r="<td class='"+a.join(" ")+"'>"+"<div>"+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>",n+=r;return l+=n,l+="<td class='fc-agenda-gutter "+i+"'>&nbsp;</td>"+"</tr>"+"</tbody>"}function m(t){t===e&&(t=be),be=t,sn={};var n=ne.position().top,r=ve.position().top,a=Math.min(t-n,pe.height()+r+1);le.height(a-L(ie)),ce.css("top",n),ve.height(a-r-1),Se=pe.find("tr:first").height()+1,Re=Ue("slotMinutes")/Ee,ze=Se/Re}function y(e){ye=e,Ae.clear(),qe.clear();var n=te.find("th:first");fe&&(n=n.add(fe.find("th:first"))),n=n.add(pe.find("th:first")),we=0,R(n.width("").each(function(e,n){we=Math.max(we,t(n).outerWidth())}),we);var r=K.find(".fc-agenda-gutter");fe&&(r=r.add(fe.find("th.fc-agenda-gutter")));var a=ve[0].clientWidth;Ce=ve.width()-a,Ce?(R(r,Ce),r.show().prev().removeClass("fc-last")):r.hide().prev().addClass("fc-last"),Me=Math.floor((a-we)/Ne),R(ee.slice(0,-1),Me)}function w(){function t(){ve.scrollTop(r)}var e=h(),n=v(e);n.setHours(Ue("firstHour"));var r=A(e,n)+1;t(),setTimeout(t,0)}function D(){w()}function M(t){t.click(S).mousedown(tn)}function C(t){t.click(S).mousedown(J)}function S(t){if(!Ue("selectable")){var e=Math.min(Ne-1,Math.floor((t.pageX-K.offset().left-we)/Me)),n=nn(0,e),r=this.parentNode.className.match(/fc-slot(\d+)/);if(r){var a=parseInt(r[1])*Ue("slotMinutes"),o=Math.floor(a/60);n.setHours(o),n.setMinutes(a%60+je),Ze("dayClick",re[e],n,!1,t)}else Ze("dayClick",re[e],n,!0,t)}}function E(t,e,n){n&&Oe.build();for(var r=an(t,e),a=0;r.length>a;a++){var o=r[a];M(T(o.row,o.leftCol,o.row,o.rightCol))}}function T(t,e,n,r){var a=Oe.rect(t,e,n,r,ce);return Ge(a,ce)}function x(t,e){for(var n=0;Ne>n;n++){var r=nn(0,n),a=c(v(r),1),o=new Date(Math.max(r,t)),i=new Date(Math.min(a,e));if(i>o){var s=Oe.rect(0,n,0,n,he),l=A(r,o),u=A(r,i);s.top=l,s.height=u-l,C(Ge(s,he))}}}function k(t){return Ae.left(t)}function H(t){return qe.left(t)}function z(t){return Ae.right(t)}function N(t){return qe.right(t)}function W(t){return Ue("allDaySlot")&&!t.row}function O(t){var e=nn(0,t.col),n=t.row;return Ue("allDaySlot")&&n--,n>=0&&f(e,je+n*Ee),e}function A(t,n){if(t=v(t,!0),f(v(t),je)>n)return 0;if(n>=f(v(t),Be))return pe.height();var r=Ue("slotMinutes"),a=60*n.getHours()+n.getMinutes()-je,o=Math.floor(a/r),i=sn[o];return i===e&&(i=sn[o]=pe.find("tr").eq(o).find("td div")[0].offsetTop),Math.max(0,Math.round(i-1+Se*(a%r/r)))}function _(){return de}function q(t){var e=v(t.start);return t.allDay?e:f(e,Ue("defaultEventMinutes"))}function I(t,e){return e?v(t):f(v(t),Ue("slotMinutes"))}function j(t,e,n){n?Ue("allDaySlot")&&E(t,c(v(e),1),!0):B(t,e)}function B(e,n){var r=Ue("selectHelper");if(Oe.build(),r){var a=rn(e).col;if(a>=0&&Ne>a){var o=Oe.rect(0,a,0,a,he),i=A(e,e),s=A(e,n);if(s>i){if(o.top=i,o.height=s-i,o.left+=2,o.width-=5,t.isFunction(r)){var l=r(e,n);l&&(o.position="absolute",me=t(l).css(o).appendTo(he))}else o.isStart=!0,o.isEnd=!0,me=t(en({title:"",start:e,end:n,className:["fc-select-helper"],editable:!1},o)),me.css("opacity",Ue("dragOpacity"));me&&(C(me),he.append(me),R(me,o.width,!0),F(me,o.height,!0))}}}else x(e,n)}function Y(){$e(),me&&(me.remove(),me=null)}function J(e){if(1==e.which&&Ue("selectable")){Ke(e);var n;Le.start(function(t,e){if(Y(),t&&t.col==e.col&&!W(t)){var r=O(e),a=O(t);n=[r,f(v(r),Ee),a,f(v(a),Ee)].sort(P),B(n[0],n[3])}else n=null},e),t(document).one("mouseup",function(t){Le.stop(),n&&(+n[0]==+n[1]&&Z(n[0],!1,t),Qe(n[0],n[3],!1,t))})}}function Z(t,e,n){Ze("dayClick",re[rn(t).col],t,e,n)}function G(t,e){Le.start(function(t){if($e(),t)if(W(t))T(t.row,t.col,t.row,t.col);else{var e=O(t),n=f(v(e),Ue("defaultEventMinutes"));x(e,n)}},e)}function $(t,e,n){var r=Le.stop();$e(),r&&Ze("drop",t,O(r),W(r),e,n)}var Q=this;Q.renderAgenda=o,Q.setWidth=y,Q.setHeight=m,Q.afterRender=D,Q.defaultEventEnd=q,Q.timePosition=A,Q.getIsCellAllDay=W,Q.allDayRow=_,Q.getCoordinateGrid=function(){return Oe},Q.getHoverListener=function(){return Le},Q.colLeft=k,Q.colRight=z,Q.colContentLeft=H,Q.colContentRight=N,Q.getDaySegmentContainer=function(){return ue},Q.getSlotSegmentContainer=function(){return ge},Q.getMinMinute=function(){return je},Q.getMaxMinute=function(){return Be},Q.getSlotContainer=function(){return he},Q.getRowCnt=function(){return 1},Q.getColCnt=function(){return Ne},Q.getColWidth=function(){return Me},Q.getSnapHeight=function(){return ze},Q.getSnapMinutes=function(){return Ee},Q.defaultSelectionEnd=I,Q.renderDayOverlay=E,Q.renderSelection=j,Q.clearSelection=Y,Q.reportDayClick=Z,Q.dragStart=G,Q.dragStop=$,De.call(Q,n,r,a),xe.call(Q),Te.call(Q),se.call(Q);var K,te,ee,ne,re,ae,oe,ie,le,ce,ue,fe,de,ve,he,ge,pe,me,ye,be,we,Me,Ce,Se,Ee,Re,ze,Ne,We,Oe,Le,Ae,qe,Ie,Pe,je,Be,Ye,Xe,Je,Ve,Ue=Q.opt,Ze=Q.trigger,Ge=Q.renderOverlay,$e=Q.clearOverlays,Qe=Q.reportSelection,Ke=Q.unselect,tn=Q.daySelectionMousedown,en=Q.slotSegHtml,nn=Q.cellToDate,rn=Q.dateToCell,an=Q.rangeToSegments,on=r.formatDate,sn={};V(n.addClass("fc-agenda")),Oe=new ke(function(e,n){function r(t){return Math.max(l,Math.min(c,t))}var a,o,i;ee.each(function(e,r){a=t(r),o=a.offset().left,e&&(i[1]=o),i=[o],n[e]=i}),i[1]=o+a.outerWidth(),Ue("allDaySlot")&&(a=de,o=a.offset().top,e[0]=[o,o+a.outerHeight()]);for(var s=he.offset().top,l=ve.offset().top,c=l+ve.outerHeight(),u=0;We*Re>u;u++)e.push([r(s+ze*u),r(s+ze*(u+1))])}),Le=new He(Oe),Ae=new Fe(function(t){return ae.eq(t)}),qe=new Fe(function(t){return oe.eq(t)})}function se(){function n(t,e){var n,r=t.length,o=[],i=[];for(n=0;r>n;n++)t[n].allDay?o.push(t[n]):i.push(t[n]);y("allDaySlot")&&(te(o,e),E()),s(a(i),e)}function r(){T().empty(),x().empty()}function a(e){var n,r,a,s,l,c=I(),u=N(),d=R(),h=t.map(e,i),g=[];for(r=0;c>r;r++)for(n=q(0,r),f(n,u),l=o(e,h,n,f(v(n),d-u)),l=le(l),a=0;l.length>a;a++)s=l[a],s.col=r,g.push(s);return g}function o(t,e,n,r){var a,o,i,s,l,c,u,f,d=[],h=t.length;for(a=0;h>a;a++)o=t[a],i=o.start,s=e[a],s>n&&r>i&&(n>i?(l=v(n),u=!1):(l=i,u=!0),s>r?(c=v(r),f=!1):(c=s,f=!0),d.push({event:o,start:l,end:c,isStart:u,isEnd:f}));return d.sort(me)}function i(t){return t.end?v(t.end):f(v(t.start),y("defaultEventMinutes"))}function s(n,r){var a,o,i,s,c,f,d,v,h,g,p,m,w,D,M,C,S=n.length,E="",T=x(),k=y("isRTL");for(a=0;S>a;a++)o=n[a],i=o.event,s=W(o.start,o.start),c=W(o.start,o.end),f=A(o.col),d=_(o.col),v=d-f,d-=.025*v,v=d-f,h=v*(o.forwardCoord-o.backwardCoord),y("slotEventOverlap")&&(h=Math.max(2*(h-10),h)),k?(p=d-o.backwardCoord*v,g=p-h):(g=f+o.backwardCoord*v,p=g+h),g=Math.max(g,f),p=Math.min(p,d),h=p-g,o.top=s,o.left=g,o.outerWidth=h,o.outerHeight=c-s,E+=l(i,o);for(T[0].innerHTML=E,m=T.children(),a=0;S>a;a++)o=n[a],i=o.event,w=t(m[a]),D=b("eventRender",i,i,w),D===!1?w.remove():(D&&D!==!0&&(w.remove(),w=t(D).css({position:"absolute",top:o.top,left:o.left}).appendTo(T)),o.element=w,i._id===r?u(i,w,o):w[0]._fci=a,J(i,w));for(H(T,n,u),a=0;S>a;a++)o=n[a],(w=o.element)&&(o.vsides=L(w,!0),o.hsides=z(w,!0),M=w.find(".fc-event-title"),M.length&&(o.contentTop=M[0].offsetTop));
for(a=0;S>a;a++)o=n[a],(w=o.element)&&(w[0].style.width=Math.max(0,o.outerWidth-o.hsides)+"px",C=Math.max(0,o.outerHeight-o.vsides),w[0].style.height=C+"px",i=o.event,o.contentTop!==e&&10>C-o.contentTop&&(w.find("div.fc-event-time").text(ne(i.start,y("timeFormat"))+" - "+i.title),w.find("div.fc-event-title").remove()),b("eventAfterRender",i,i,w))}function l(t,e){var n="<",r=t.url,a=G(t,y),o=["fc-event","fc-event-vert"];return w(t)&&o.push("fc-event-draggable"),e.isStart&&o.push("fc-event-start"),e.isEnd&&o.push("fc-event-end"),o=o.concat(t.className),t.source&&(o=o.concat(t.source.className||[])),n+=r?"a href='"+X(t.url)+"'":"div",n+=" class='"+o.join(" ")+"'"+" style="+"'"+"position:absolute;"+"top:"+e.top+"px;"+"left:"+e.left+"px;"+a+"'"+">"+"<div class='fc-event-inner'>"+"<div class='fc-event-time'>"+X(re(t.start,t.end,y("timeFormat")))+"</div>"+"<div class='fc-event-title'>"+X(t.title||"")+"</div>"+"</div>"+"<div class='fc-event-bg'></div>",e.isEnd&&D(t)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(r?"a":"div")+">"}function u(t,e,n){var r=e.find("div.fc-event-time");w(t)&&h(t,e,r),n.isEnd&&D(t)&&p(t,e,r),S(t,e)}function d(t,e,n){function r(){l||(e.width(a).height("").draggable("option","grid",null),l=!0)}var a,o,i,s=n.isStart,l=!0,u=k(),f=P(),d=j(),h=B(),p=N();e.draggable({opacity:y("dragOpacity","month"),revertDuration:y("dragRevertDuration"),start:function(n,p){b("eventDragStart",e,t,n,p),U(t,e),a=e.width(),u.start(function(n,a){if(K(),n){o=!1;var u=q(0,a.col),p=q(0,n.col);i=g(p,u),n.row?s?l&&(e.width(f-10),F(e,d*Math.round((t.end?(t.end-t.start)/Pe:y("defaultEventMinutes"))/h)),e.draggable("option","grid",[f,1]),l=!1):o=!0:(Q(c(v(t.start),i),c(C(t),i)),r()),o=o||l&&!i}else r(),o=!0;e.draggable("option","revert",o)},n,"drag")},stop:function(n,a){if(u.stop(),K(),b("eventDragStop",e,t,n,a),o)r(),e.css("filter",""),V(t,e);else{var s=0;l||(s=Math.round((e.offset().top-Y().offset().top)/d)*h+p-(60*t.start.getHours()+t.start.getMinutes())),Z(this,t,i,s,l,n,a)}}})}function h(t,e,n){function r(){K(),s&&(u?(n.hide(),e.draggable("option","grid",null),Q(c(v(t.start),w),c(C(t),w))):(a(D),n.css("display",""),e.draggable("option","grid",[T,x])))}function a(e){var r,a=f(v(t.start),e);t.end&&(r=f(v(t.end),e)),n.text(re(a,r,y("timeFormat")))}var o,i,s,l,u,d,h,p,w,D,M,S=m.getCoordinateGrid(),E=I(),T=P(),x=j(),k=B();e.draggable({scroll:!1,grid:[T,x],axis:1==E?"y":!1,opacity:y("dragOpacity"),revertDuration:y("dragRevertDuration"),start:function(n,r){b("eventDragStart",e,t,n,r),U(t,e),S.build(),o=e.position(),i=S.cell(n.pageX,n.pageY),s=l=!0,u=d=O(i),h=p=0,w=0,D=M=0},drag:function(t,n){var a=S.cell(t.pageX,t.pageY);if(s=!!a){if(u=O(a),h=Math.round((n.position.left-o.left)/T),h!=p){var c=q(0,i.col),f=i.col+h;f=Math.max(0,f),f=Math.min(E-1,f);var v=q(0,f);w=g(v,c)}u||(D=Math.round((n.position.top-o.top)/x)*k)}(s!=l||u!=d||h!=p||D!=M)&&(r(),l=s,d=u,p=h,M=D),e.draggable("option","revert",!s)},stop:function(n,a){K(),b("eventDragStop",e,t,n,a),s&&(u||w||D)?Z(this,t,w,u?0:D,u,n,a):(s=!0,u=!1,h=0,w=0,D=0,r(),e.css("filter",""),e.css(o),V(t,e))}})}function p(t,e,n){var r,a,o=j(),i=B();e.resizable({handles:{s:".ui-resizable-handle"},grid:o,start:function(n,o){r=a=0,U(t,e),b("eventResizeStart",this,t,n,o)},resize:function(s,l){r=Math.round((Math.max(o,e.height())-l.originalSize.height)/o),r!=a&&(n.text(re(t.start,r||t.end?f(M(t),i*r):null,y("timeFormat"))),a=r)},stop:function(n,a){b("eventResizeStop",this,t,n,a),r?$(this,t,0,i*r,n,a):V(t,e)}})}var m=this;m.renderEvents=n,m.clearEvents=r,m.slotSegHtml=l,Me.call(m);var y=m.opt,b=m.trigger,w=m.isEventDraggable,D=m.isEventResizable,M=m.eventEnd,S=m.eventElementHandlers,E=m.setHeight,T=m.getDaySegmentContainer,x=m.getSlotSegmentContainer,k=m.getHoverListener,R=m.getMaxMinute,N=m.getMinMinute,W=m.timePosition,O=m.getIsCellAllDay,A=m.colContentLeft,_=m.colContentRight,q=m.cellToDate,I=m.getColCnt,P=m.getColWidth,j=m.getSnapHeight,B=m.getSnapMinutes,Y=m.getSlotContainer,J=m.reportEventElement,V=m.showEvents,U=m.hideEvents,Z=m.eventDrop,$=m.eventResize,Q=m.renderDayOverlay,K=m.clearOverlays,te=m.renderDayEvents,ee=m.calendar,ne=ee.formatDate,re=ee.formatDates;m.draggableDayEvent=d}function le(t){var e,n=ce(t),r=n[0];if(ue(n),r){for(e=0;r.length>e;e++)fe(r[e]);for(e=0;r.length>e;e++)de(r[e],0,0)}return ve(n)}function ce(t){var e,n,r,a=[];for(e=0;t.length>e;e++){for(n=t[e],r=0;a.length>r&&he(n,a[r]).length;r++);(a[r]||(a[r]=[])).push(n)}return a}function ue(t){var e,n,r,a,o;for(e=0;t.length>e;e++)for(n=t[e],r=0;n.length>r;r++)for(a=n[r],a.forwardSegs=[],o=e+1;t.length>o;o++)he(a,t[o],a.forwardSegs)}function fe(t){var n,r,a=t.forwardSegs,o=0;if(t.forwardPressure===e){for(n=0;a.length>n;n++)r=a[n],fe(r),o=Math.max(o,1+r.forwardPressure);t.forwardPressure=o}}function de(t,n,r){var a,o=t.forwardSegs;if(t.forwardCoord===e)for(o.length?(o.sort(pe),de(o[0],n+1,r),t.forwardCoord=o[0].backwardCoord):t.forwardCoord=1,t.backwardCoord=t.forwardCoord-(t.forwardCoord-r)/(n+1),a=0;o.length>a;a++)de(o[a],0,t.forwardCoord)}function ve(t){var e,n,r,a=[];for(e=0;t.length>e;e++)for(n=t[e],r=0;n.length>r;r++)a.push(n[r]);return a}function he(t,e,n){n=n||[];for(var r=0;e.length>r;r++)ge(t,e[r])&&n.push(e[r]);return n}function ge(t,e){return t.end>e.start&&t.start<e.end}function pe(t,e){return e.forwardPressure-t.forwardPressure||(t.backwardCoord||0)-(e.backwardCoord||0)||me(t,e)}function me(t,e){return t.start-e.start||e.end-e.start-(t.end-t.start)||(t.event.title||"").localeCompare(e.event.title)}function ye(t,e){function n(t,e){e&&(c(t,e),a("weekends")||skipWeekend(t,0>e?-1:1));var n=v(t,!0),s=c(v(n),1);r.title=i(t,a("titleFormat")),r.start=r.visStart=n,r.end=r.visEnd=s,o()}var r=this;r.render=n,we.call(r,t,e,"resourceDay");var a=r.opt,o=r.renderResource,i=e.formatDate}function be(){function n(t,e){var n,r=t.length,a=[],i=[];for(n=0;r>n;n++)t[n].allDay?a.push(t[n]):i.push(t[n]);w("allDaySlot")&&(renderDayEvents(a,e),N()),l(o(i),e)}function r(){W().empty(),O().empty()}function a(e){var n,r,a,o,i=k(x(e,t.map(e,C),b.visStart,b.visEnd)),s=i.length,l=[];for(n=0;s>n;n++)for(r=i[n],a=0;r.length>a;a++)o=r[a],o.row=0,o.level=n,l.push(o);return l}function o(e){var n,r,a,o,l,c,u=Y(),d=q(),h=_(),g=f(v(b.visStart),d),p=[];for(n=0;u>n;n++){var y=i(se[n],e);for(r=k(x(y,t.map(y,s),g,f(v(g),h-d))),m(r),a=0;r.length>a;a++)for(o=r[a],l=0;o.length>l;l++)c=o[l],c.col=n,c.level=a,p.push(c)}return p}function i(t,e){for(var n=[],r=0;e.length>r;r++)e[r].resourceId===t.id&&n.push(e[r]);return n}function s(t){return t.end?v(t.end):f(v(t.start),w("defaultEventMinutes"))}function l(n,r){var a,o,i,s,l,c,f,d,v,g,p,m,y,b,M,C,S,E,T,x,k,R,F=n.length,N="",W={},A={},_=O(),q=Y();for((x=w("isRTL"))?(k=-1,R=q-1):(k=1,R=0),a=0;F>a;a++)o=n[a],i=o.event,s=I(o.start,o.start),l=I(o.start,o.end),c=o.col,f=o.level,d=o.forward||0,v=P(c*k+R),g=j(c*k+R)-v,g=Math.min(g-6,.95*g),p=f?g/(f+d+1):d?2*(g/(d+1)-6):g,m=v+g/(f+d+1)*f*k+(x?g-p:0),o.top=s,o.left=m,o.outerWidth=p,o.outerHeight=l-s,N+=u(i,o);for(_[0].innerHTML=N,y=_.children(),a=0;F>a;a++)o=n[a],i=o.event,b=t(y[a]),M=D("eventRender",i,i,b),M===!1?b.remove():(M&&M!==!0&&(b.remove(),b=t(M).css({position:"absolute",top:o.top,left:o.left}).appendTo(_)),o.element=b,i._id===r?h(i,b,o):b[0]._fci=a,$(i,b));for(H(_,n,h),a=0;F>a;a++)o=n[a],(b=o.element)&&(S=W[C=o.key=J(b[0])],o.vsides=S===e?W[C]=L(b,!0):S,S=A[C],o.hsides=S===e?A[C]=z(b,!0):S,E=b.find("div.fc-event-content"),E.length&&(o.contentTop=E[0].offsetTop));for(a=0;F>a;a++)o=n[a],(b=o.element)&&(b[0].style.width=Math.max(0,o.outerWidth-o.hsides)+"px",T=Math.max(0,o.outerHeight-o.vsides),b[0].style.height=T+"px",i=o.event,o.contentTop!==e&&10>T-o.contentTop&&(b.find("div.fc-event-time").text(oe(i.start,w("timeFormat"))+" - "+i.title),b.find("div.fc-event-title").remove()),D("eventAfterRender",i,i,b))}function u(t,e){var n="<",r=t.url,a=G(t,w),o=a?" style='"+a+"'":"",i=["fc-event","fc-event-skin","fc-event-vert"];return M(t)&&i.push("fc-event-draggable"),e.isStart&&i.push("fc-corner-top"),e.isEnd&&i.push("fc-corner-bottom"),i=i.concat(t.className),t.source&&(i=i.concat(t.source.className||[])),n+=r?"a href='"+X(t.url)+"'":"div",n+=" class='"+i.join(" ")+"'"+" style='position:absolute;z-index:8;top:"+e.top+"px;left:"+e.left+"px;"+a+"'"+">"+"<div class='fc-event-inner fc-event-skin'"+o+">"+"<div class='fc-event-head fc-event-skin'"+o+">"+"<div class='fc-event-time'>"+X(ie(t.start,t.end,w("timeFormat")))+"</div>"+"</div>"+"<div class='fc-event-content'>"+"<div class='fc-event-title'>"+X(t.title)+"</div>"+"</div>"+"<div class='fc-event-bg'></div>"+"</div>",e.isEnd&&S(t)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(r?"a":"div")+">"}function d(t,e,n){M(t)&&g(t,e,n.isStart),n.isEnd&&S(t)&&B(t,e,n),R(t,e)}function h(t,e,n){var r=e.find("div.fc-event-time");M(t)&&p(t,e,r),n.isEnd&&S(t)&&y(t,e,r),R(t,e)}function g(t,e,n){function r(){s||(e.width(a).height("").draggable("option","grid",null),s=!0)}var a,o,i,s=!0,l=w("isRTL")?-1:1,u=A(),f=V(),d=U(),h=q();e.draggable({zIndex:9,opacity:w("dragOpacity","month"),revertDuration:w("dragRevertDuration"),start:function(h,g){D("eventDragStart",e,t,h,g),K(t,e),a=e.width(),u.start(function(a,u,h,g){re(),a?(o=!1,i=g*l,a.row?n?s&&(e.width(f-10),F(e,d*Math.round((t.end?(t.end-t.start)/Pe:w("defaultEventMinutes"))/w("slotMinutes"))),e.draggable("option","grid",[f,1]),s=!1):o=!0:(ne(c(v(t.start),i),c(C(t),i),!0,se[a.col]),r()),o=o||s&&!i):(r(),o=!0),e.draggable("option","revert",o)},h,"drag")},stop:function(n,a){var l=u.stop();if(re(),t.resourceId=se[l.col].id,D("eventDragStop",e,t,n,a),o)r(),e.css("filter",""),Q(t,e);else{var c=0;s||(c=Math.round((e.offset().top-Z().offset().top)/d)*w("slotMinutes")+h-(60*t.start.getHours()+t.start.getMinutes())),i=0,te(this,t,i,c,s,n,a)}}})}function p(t,e,n){function r(e){var r,a=f(v(t.start),e);t.end&&(r=f(v(t.end),e)),n.text(ie(a,r,w("timeFormat")))}function a(){u&&(n.css("display",""),e.draggable("option","grid",[p,m]),u=!1)}var o,i,s,l,u=!1,d=w("isRTL")?-1:1,h=A(),g=Y(),p=V(),m=U();e.draggable({zIndex:9,scroll:!1,grid:[p,m],axis:1==g?"y":!1,opacity:w("dragOpacity"),revertDuration:w("dragRevertDuration"),start:function(r,f){D("eventDragStart",e,t,r,f),K(t,e),o=e.position(),s=l=0,h.start(function(r,o,s,l){e.draggable("option","revert",!r),re(),r&&(i=l*d,w("allDaySlot")&&!r.row?(u||(u=!0,n.hide(),e.draggable("option","grid",null)),ne(c(v(t.start),i),c(C(t),i),!0,se[r.col])):a())},r,"drag")},drag:function(t,e){s=Math.round((e.position.top-o.top)/m)*w("slotMinutes"),s!=l&&(u||r(s),l=s)},stop:function(n,l){var c=h.stop();re(),D("eventDragStop",e,t,n,l),c&&(i||s||u)?(t.oldResourceId=t.resourceId,t.resourceId=se[c.col].id,i=0,te(this,t,i,u?0:s,u,n,l)):(a(),e.css("filter",""),e.css(o),r(0),Q(t,e))}})}function m(t){var e,n,r,a,o,i;for(e=t.length-1;e>0;e--)for(a=t[e],n=0;a.length>n;n++)for(o=a[n],r=0;t[e-1].length>r;r++)i=t[e-1][r],T(o,i)&&(i.forward=Math.max(i.forward||0,(o.forward||0)+1))}function y(t,e,n){var r,a,o=U();e.resizable({handles:{s:"div.ui-resizable-s"},grid:o,start:function(n,o){r=a=0,K(t,e),e.css("z-index",9),D("eventResizeStart",this,t,n,o)},resize:function(i,s){r=Math.round((Math.max(o,e.height())-s.originalSize.height)/o),r!=a&&(n.text(ie(t.start,r||t.end?f(E(t),w("slotMinutes")*r):null,w("timeFormat"))),a=r)},stop:function(n,a){D("eventResizeStop",this,t,n,a),r?ee(this,t,0,w("slotMinutes")*r,n,a):(e.css("z-index",8),Q(t,e))}})}var b=this;b.renderEvents=n,b.compileDaySegs=a,b.clearEvents=r,b.slotSegHtml=u,b.bindDaySeg=d,Me.call(b);var w=b.opt,D=b.trigger,M=b.isEventDraggable,S=b.isEventResizable,E=b.eventEnd;b.reportEvents,b.reportEventClear;var R=b.eventElementHandlers,N=b.setHeight,W=b.getDaySegmentContainer,O=b.getSlotSegmentContainer,A=b.getHoverListener,_=b.getMaxMinute,q=b.getMinMinute,I=b.timePosition,P=b.colContentLeft,j=b.colContentRight;b.renderDaySegs;var B=b.resizableDayEvent,Y=b.getColCnt,V=b.getColWidth,U=b.getSlotHeight,Z=b.getBodyContent,$=b.reportEventElement,Q=b.showEvents,K=b.hideEvents,te=b.eventDrop,ee=b.eventResize,ne=b.renderDayOverlay,re=b.clearOverlays,ae=b.calendar,oe=ae.formatDate,ie=ae.formatDates;b.resourceCol;var se=b.resources}function we(n,r,a){function o(){Oe=on.length,i(),ee?$e():s(),l()}function i(){Ie=Ze("theme")?"ui":"fc",je=Ze("weekends")?0:1,Pe=Ze("firstDay"),(Be=Ze("isRTL"))?(Ye=-1,Xe=Oe-1):(Ye=1,Xe=0),Je=b(Ze("minTime")),Ve=b(Ze("maxTime")),Ue=Ze("columnFormat")}function s(){var e,r,a,o,i,s=Ie+"-widget-header",l=Ie+"-widget-content",c=0==Ze("slotMinutes")%15;for(e="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr><th class='fc-agenda-axis "+s+"'>&nbsp;</th>",r=0;Oe>r;r++)e+="<th class='fc- fc-col"+r+" "+s+"'/>";for(e+="<th class='fc-agenda-gutter "+s+"'>&nbsp;</th>"+"</tr>"+"</thead>"+"<tbody>"+"<tr>"+"<th class='fc-agenda-axis "+s+"'>&nbsp;</th>",r=0;Oe>r;r++)e+="<td class='fc- fc-col"+r+" "+l+"'>"+"<div>"+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>";for(e+="<td class='fc-agenda-gutter "+l+"'>&nbsp;</td>"+"</tr>"+"</tbody>"+"</table>",ee=t(e).appendTo(n),ne=ee.find("thead"),re=ne.find("th").slice(1,-1),ae=ee.find("tbody"),oe=ae.find("td").slice(0,-1),ie=oe.find("div.fc-day-content div"),se=oe.eq(0),le=se.find("> div"),U(ne.add(ne.find("tr"))),U(ae.add(ae.find("tr"))),ye=ne.find("th:first"),we=ee.find(".fc-agenda-gutter"),ce=t("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(n),Ze("allDaySlot")?(ue=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ce),e="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+s+" fc-agenda-axis'>"+Ze("allDayText")+"</th>"+"<td>"+"<div class='fc-day-content'><div style='position:relative'/></div>"+"</td>"+"<th class='"+s+" fc-agenda-gutter'>&nbsp;</th>"+"</tr>"+"</table>",fe=t(e).appendTo(ce),de=fe.find("tr"),D(de.find("td")),ye=ye.add(fe.find("th:first")),we=we.add(fe.find("th.fc-agenda-gutter")),ce.append("<div class='fc-agenda-divider "+s+"'>"+"<div class='fc-agenda-divider-inner'/>"+"</div>")):ue=t([]),ve=t("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(ce),he=t("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(ve),ge=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(he),e="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",a=h(),o=f(v(a),Ve),f(a,Je),Le=0,r=0;o>a;r++)i=a.getMinutes(),e+="<tr class='fc-slot"+r+" "+(i?"fc-minor":"")+"'>"+"<th class='fc-agenda-axis "+s+"'>"+(c&&i?"&nbsp;":rn(a,Ze("axisFormat")))+"</th>"+"<td class='"+l+"'>"+"<div style='position:relative'>&nbsp;</div>"+"</td>"+"</tr>",f(a,Ze("slotMinutes")),Le++;e+="</tbody></table>",pe=t(e).appendTo(he),me=pe.find("div:first"),M(pe.find("td")),ye=ye.add(pe.find("th:first"))}function l(){var t,e,n,r,a=d(new Date);for(t=0;Oe>t;t++)r=N(t),e=re.eq(t),e.html(on[t].name),e.attr("id",on[t].id),n=oe.eq(t),+r==+a?n.addClass(Ie+"-state-highlight fc-today"):n.removeClass(Ie+"-state-highlight fc-today"),Z(e.add(n),r)}function u(t,n){t===e&&(t=Se),Se=t,an={};var r=ae.position().top,a=ve.position().top,o=Math.min(t-r,pe.height()+a+1);le.height(o-L(se)),ce.css("top",r),ve.height(o-a-1),Ne=me.height()+1,n&&m()}function p(e){Ce=e,qe.clear(),Ee=0,R(ye.width("").each(function(e,n){Ee=Math.max(Ee,t(n).outerWidth())}),Ee);var n=ve[0].clientWidth;ze=ve.width()-n,ze?(R(we,ze),we.show().prev().removeClass("fc-last")):we.hide().prev().addClass("fc-last"),Re=Math.floor((n-Ee)/Oe),R(re.slice(0,-1),Re)}function m(){function t(){ve.scrollTop(r)}var e=h(),n=v(e);n.setHours(Ze("firstHour"));var r=_(e,n)+1;t(),setTimeout(t,0)}function y(){We=ve.scrollTop()}function w(){ve.scrollTop(We)}function D(t){t.click(C).mousedown(J)}function M(t){t.click(C).mousedown(G)}function C(t){if(!Ze("selectable")){var e=Math.min(Oe-1,Math.floor((t.pageX-ee.offset().left-Ee)/Re)),n=N(e),r=this.parentNode.className.match(/fc-slot(\d+)/);if(r){var a=parseInt(r[1])*Ze("slotMinutes"),o=Math.floor(a/60);n.setHours(o),n.setMinutes(a%60+Je),Ge("dayClick",oe[e],n,!1,t)}else Ge("dayClick",oe[e],n,!0,t)}}function S(t,e,n,r){n&&Ae.build();var a,o;a=A(r),o=a+1,D(E(0,a,0,o-1))}function E(t,e,n,r){var a=Ae.rect(t,e,n,r,ce);return Qe(a,ce)}function T(t,e){for(var n=v(te.visStart),r=c(v(n),1),a=0;Oe>a;a++){var o=new Date(Math.max(n,t)),i=new Date(Math.min(r,e));if(i>o){var s=a*Ye+Xe,l=Ae.rect(0,s,0,s,he),u=_(n,o),f=_(n,i);l.top=u,l.height=f-u,M(Qe(l,he))}c(n,1),c(r,1)}}function x(t){return qe.left(t)}function k(t){return qe.right(t)}function H(t){return{row:Math.floor(g(t,te.visStart)/7),col:O(t.getDay())}}function z(t){var e=N(t.col),n=t.row;return Ze("allDaySlot")&&n--,n>=0&&f(e,Je+n*Ze("slotMinutes")),e}function N(){return v(te.visStart)}function W(t){return Ze("allDaySlot")&&!t.row}function O(){return 0}function A(t){for(var e=0;on.length>e;e++)if(t.id===on[e].id)return e;return-1}function _(t,n){if(t=v(t,!0),f(v(t),Je)>n)return 0;if(n>=f(v(t),Ve))return pe.height();var r=Ze("slotMinutes"),a=60*n.getHours()+n.getMinutes()-Je,o=Math.floor(a/r),i=an[o];return i===e&&(i=an[o]=pe.find("tr:eq("+o+") td div")[0].offsetTop),Math.max(0,Math.round(i-1+Ne*(a%r/r)))}function q(){return{left:Ee,right:Ce-ze}}function I(){return de}function P(t){var e=v(t.start);return t.allDay?e:f(e,Ze("defaultEventMinutes"))}function j(t,e){return e?v(t):f(v(t),Ze("slotMinutes"))}function B(t,e,n,r){n?Ze("allDaySlot")&&S(t,c(v(e),1),!0,r):Y(t,e,r)}function Y(e,n,r){var a=Ze("selectHelper");if(Ae.build(),a){var o=A(r);if(o>=0&&Oe>o){var i=Ae.rect(0,o,0,o,he),s=_(e,e),l=_(e,n);if(l>s){if(i.top=s,i.height=l-s,i.left+=2,i.width-=5,t.isFunction(a)){var c=a(e,n);c&&(i.position="absolute",i.zIndex=8,Me=t(c).css(i).appendTo(he))}else i.isStart=!0,i.isEnd=!0,Me=t(nn({title:"",start:e,end:n,className:["fc-select-helper"],editable:!1},i)),Me.css("opacity",Ze("dragOpacity"));Me&&(M(Me),he.append(Me),R(Me,i.width,!0),F(Me,i.height,!0))}}}else T(e,n)}function X(){Ke(),Me&&(Me.remove(),Me=null)}function J(e){var n=te.cellDate,r=te.cellIsAllDay,a=te.getHoverListener();if(1==e.which&&Ze("selectable")){en(e);var o,i;a.start(function(t,e){X(),t&&r(t)?(i=on[t.col],o=[n(e),n(t)].sort(cmp),B(o[0],o[1],!0,i)):o=null},e),t(document).one("mouseup",function(t){a.stop(),o&&i&&tn(o[0],o[1],!0,t,i.id)})}}function G(e){if(1==e.which&&Ze("selectable")){en(e);var n,r;_e.start(function(t,e){if(X(),t&&t.col==e.col&&!W(t)){r=on[t.col];var a=z(e),o=z(t);n=[a,f(v(a),Ze("slotMinutes")),o,f(v(o),Ze("slotMinutes"))].sort(cmp),Y(n[0],n[3],r)}else n=null},e),t(document).one("mouseup",function(t){_e.stop(),n&&r&&tn(n[0],n[3],!1,t,r.id)})}}function $(t,e,n){Ge("dayClick",oe[O(t.getDay())],t,e,n)}function Q(t,e){_e.start(function(t){if(Ke(),t)if(W(t))E(t.row,t.col,t.row,t.col);else{var e=z(t),n=f(v(e),Ze("defaultEventMinutes"));T(e,n)}},e)}function K(t,e,n){var r=_e.stop();Ke(),r&&Ge("drop",t,z(r),W(r),e,n)}var te=this;te.renderResource=o,te.setWidth=p,te.setHeight=u,te.beforeHide=y,te.afterShow=w,te.defaultEventEnd=P,te.timePosition=_,te.dayOfWeekCol=O,te.dateCell=H,te.cellDate=z,te.cellIsAllDay=W,te.allDayRow=I,te.allDayBounds=q,te.getHoverListener=function(){return _e},te.colContentLeft=x,te.colContentRight=k,te.getDaySegmentContainer=function(){return ue},te.getSlotSegmentContainer=function(){return ge},te.getMinMinute=function(){return Je},te.getMaxMinute=function(){return Ve},te.getBodyContent=function(){return he},te.getRowCnt=function(){return 1},te.getColCnt=function(){return Oe},te.getColWidth=function(){return Re},te.getSlotHeight=function(){return Ne},te.defaultSelectionEnd=j,te.renderDayOverlay=S,te.renderSelection=B,te.clearSelection=X,te.reportDayClick=$,te.dragStart=Q,te.dragStop=K,te.resourceCol=A,te.resources=r.fetchResources(),De.call(te,n,r,a),xe.call(te),Te.call(te),be.call(te);var ee,ne,re,ae,oe,ie,se,le,ce,ue,fe,de,ve,he,ge,pe,me,ye,we,Me,Ce,Se,Ee,Re,ze,Ne,We,Oe,Le,Ae,_e,qe,Ie,Pe,je,Be,Ye,Xe,Je,Ve,Ue,Ze=te.opt,Ge=te.trigger,$e=te.clearEvents,Qe=te.renderOverlay,Ke=te.clearOverlays,tn=te.reportSelection,en=te.unselect,nn=te.slotSegHtml,rn=r.formatDate,an={},on=te.resources;V(n.addClass("fc-agenda")),Ae=new ke(function(e,n){function r(t){return Math.max(l,Math.min(c,t))}var a,o,i;re.each(function(e,r){a=t(r),o=a.offset().left,e&&(i[1]=o),i=[o],n[e]=i}),i[1]=o+a.outerWidth(),Ze("allDaySlot")&&(a=de,o=a.offset().top,e[0]=[o,o+a.outerHeight()]);for(var s=he.offset().top,l=ve.offset().top,c=l+ve.outerHeight(),u=0;Le>u;u++)e.push([r(s+Ne*u),r(s+Ne*(u+1))])}),_e=new He(Ae),qe=new Fe(function(t){return ie.eq(t)})}function De(n,r,a){function o(e,n){var r=J[e];return t.isPlainObject(r)?Y(r,n||a):r}function i(t,e){return r.trigger.apply(r,[t,e||_].concat(Array.prototype.slice.call(arguments,2),[_]))}function s(t){var e=t.source||{};return Q(t.startEditable,e.startEditable,o("eventStartEditable"),t.editable,e.editable,o("editable"))&&!o("disableDragging")}function l(t){var e=t.source||{};return Q(t.durationEditable,e.durationEditable,o("eventDurationEditable"),t.editable,e.editable,o("editable"))&&!o("disableResizing")}function u(t){j={};var e,n,r=t.length;for(e=0;r>e;e++)n=t[e],j[n._id]?j[n._id].push(n):j[n._id]=[n]}function d(){j={},B={},X=[]}function h(t){return t.end?v(t.end):q(t)}function p(t,e){X.push({event:t,element:e}),B[t._id]?B[t._id].push(e):B[t._id]=[e]}function m(){t.each(X,function(t,e){_.trigger("eventDestroy",e.event,e.event,e.element)})}function y(t,n){n.click(function(r){return n.hasClass("ui-draggable-dragging")||n.hasClass("ui-resizable-resizing")?e:i("eventClick",this,t,r)}).hover(function(e){i("eventMouseover",this,t,e)},function(e){i("eventMouseout",this,t,e)})}function b(t,e){D(t,e,"show")}function w(t,e){D(t,e,"hide")}function D(t,e,n){var r,a=B[t._id],o=a.length;for(r=0;o>r;r++)e&&a[r][0]==e[0]||a[r][n]()}function M(t,e,n,r,a,o,s){var l=e.allDay,c=e._id;S(j[c],n,r,a),i("eventDrop",t,e,n,r,a,function(){S(j[c],-n,-r,l),P(c)},o,s),P(c)}function C(t,e,n,r,a,o){var s=e._id;E(j[s],n,r),i("eventResize",t,e,n,r,function(){E(j[s],-n,-r),P(s)},a,o),P(s)}function S(t,n,r,a){r=r||0;for(var o,i=t.length,s=0;i>s;s++)o=t[s],a!==e&&(o.allDay=a),f(c(o.start,n,!0),r),o.end&&(o.end=f(c(o.end,n,!0),r)),I(o,J)}function E(t,e,n){n=n||0;for(var r,a=t.length,o=0;a>o;o++)r=t[o],r.end=f(c(h(r),e,!0),n),I(r,J)}function T(t){return"object"==typeof t&&(t=t.getDay()),Z[t]}function x(){return V}function k(t,e,n){for(e=e||1;Z[(t.getDay()+(n?e:0)+7)%7];)c(t,e)}function H(){var t=R.apply(null,arguments),e=F(t),n=z(e);return n}function R(t,e){var n=_.getColCnt(),r=K?-1:1,a=K?n-1:0;"object"==typeof t&&(e=t.col,t=t.row);var o=t*n+(e*r+a);return o}function F(t){var e=_.visStart.getDay();return t+=G[e],7*Math.floor(t/V)+$[(t%V+V)%V]-e}function z(t){var e=v(_.visStart);return c(e,t),e}function N(t){var e=W(t),n=O(e),r=L(n);return r}function W(t){return g(t,_.visStart)}function O(t){var e=_.visStart.getDay();return t+=e,Math.floor(t/7)*V+G[(t%7+7)%7]-G[e]}function L(t){var e=_.getColCnt(),n=K?-1:1,r=K?e-1:0,a=Math.floor(t/e),o=(t%e+e)%e*n+r;return{row:a,col:o}}function A(t,e){for(var n=_.getRowCnt(),r=_.getColCnt(),a=[],o=W(t),i=W(e),s=O(o),l=O(i)-1,c=0;n>c;c++){var u=c*r,f=u+r-1,d=Math.max(s,u),v=Math.min(l,f);if(v>=d){var h=L(d),g=L(v),p=[h.col,g.col].sort(),m=F(d)==o,y=F(v)+1==i;a.push({row:c,leftCol:p[0],rightCol:p[1],isStart:m,isEnd:y})}}return a}var _=this;_.element=n,_.calendar=r,_.name=a,_.opt=o,_.trigger=i,_.isEventDraggable=s,_.isEventResizable=l,_.setEventData=u,_.clearEventData=d,_.eventEnd=h,_.reportEventElement=p,_.triggerEventDestroy=m,_.eventElementHandlers=y,_.showEvents=b,_.hideEvents=w,_.eventDrop=M,_.eventResize=C;var q=_.defaultEventEnd,I=r.normalizeEvent,P=r.reportEventChange,j={},B={},X=[],J=r.options;_.isHiddenDay=T,_.skipHiddenDays=k,_.getCellsPerWeek=x,_.dateToCell=N,_.dateToDayOffset=W,_.dayOffsetToCellOffset=O,_.cellOffsetToCell=L,_.cellToDate=H,_.cellToCellOffset=R,_.cellOffsetToDayOffset=F,_.dayOffsetToDate=z,_.rangeToSegments=A;var V,U=o("hiddenDays")||[],Z=[],G=[],$=[],K=o("isRTL");(function(){o("weekends")===!1&&U.push(0,6);for(var e=0,n=0;7>e;e++)G[e]=n,Z[e]=-1!=t.inArray(e,U),Z[e]||($[n]=e,n++);if(V=n,!V)throw"invalid hiddenDays"})()}function Me(){function e(t,e,n){var a=r(t,!1,!0,n);Se(a,function(t,e){F(t.event,e)}),b(a,e),Se(a,function(t,e){T("eventAfterRender",t.event,t.event,e)})}function n(t,e,n){var a=r([t],!0,!1),o=[];return Se(a,function(t,r){t.row===e&&r.css("top",n),o.push(r[0])}),o}function r(e,n,r,o){var l,c,d=U(),v=n?t("<div/>"):d,h=a(e);return i(h),l=s(h,o),v[0].innerHTML=l,c=v.children(),n&&d.append(c),u(h,c),Se(h,function(t,e){t.hsides=z(e,!0)}),Se(h,function(t,e){e.width(Math.max(0,t.outerWidth-t.hsides))}),Se(h,function(t,e){t.outerHeight=e.outerHeight(!0)}),f(h,r),h}function a(t){for(var e=[],n=0;t.length>n;n++){var r=o(t[n]);e.push.apply(e,r)}return e}function o(t){for(var e=t.start,n=C(t),r=ee(e,n),a=0;r.length>a;a++)r[a].event=t;return r}function i(t){for(var e=E("isRTL"),n=0;t.length>n;n++){var r=t[n],a=(e?r.isEnd:r.isStart)?Y:P,o=(e?r.isStart:r.isEnd)?J:B,i=a(r.leftCol),s=o(r.rightCol);r.left=i,r.outerWidth=s-i}}function s(t){for(var e="",n=0;t.length>n;n++)e+=l(t[n]);return e}function l(t){var e="",n=E("isRTL"),r=t.event,a=r.url,o=["fc-event","fc-event-hori"];x(r)&&o.push("fc-event-draggable"),t.isStart&&o.push("fc-event-start"),t.isEnd&&o.push("fc-event-end"),o=o.concat(r.className),r.source&&(o=o.concat(r.source.className||[]));var i=G(r,E);return e+=a?"<a href='"+X(a)+"'":"<div",e+=" class='"+o.join(" ")+"'"+" style="+"'"+"position:absolute;"+"left:"+t.left+"px;"+i+"'"+">"+"<div class='fc-event-inner'>",!r.allDay&&t.isStart&&(e+="<span class='fc-event-time'>"+X(Z(r.start,r.end,E("timeFormat")))+"</span>"),e+="<span class='fc-event-title'>"+X(r.title||"")+"</span>"+"</div>",t.isEnd&&k(r)&&(e+="<div class='ui-resizable-handle ui-resizable-"+(n?"w":"e")+"'>"+"&nbsp;&nbsp;&nbsp;"+"</div>"),e+="</"+(a?"a":"div")+">"}function u(e,n){for(var r=0;e.length>r;r++){var a=e[r],o=a.event,i=n.eq(r),s=T("eventRender",o,o,i);s===!1?i.remove():(s&&s!==!0&&(s=t(s).css({position:"absolute",left:a.left}),i.replaceWith(s),i=s),a.element=i)}}function f(t,e){var n=d(t),r=y(),a=[];if(e)for(var o=0;r.length>o;o++)r[o].height(n[o]);for(var o=0;r.length>o;o++)a.push(r[o].position().top);Se(t,function(t,e){e.css("top",a[t.row]+t.top)})}function d(t){for(var e=_(),n=q(),r=[],a=h(t),o=0;e>o;o++){for(var i=a[o],s=[],l=0;n>l;l++)s.push(0);for(var c=0;i.length>c;c++){var u=i[c];u.top=j(s.slice(u.leftCol,u.rightCol+1));for(var l=u.leftCol;u.rightCol>=l;l++)s[l]=u.top+u.outerHeight}r.push(j(s))}return r}function h(t){var e,n,r,a=_(),o=[];for(e=0;t.length>e;e++)n=t[e],r=n.row,n.element&&(o[r]?o[r].push(n):o[r]=[n]);for(r=0;a>r;r++)o[r]=p(o[r]||[]);return o}function p(t){for(var e=[],n=m(t),r=0;n.length>r;r++)e.push.apply(e,n[r]);return e}function m(t){t.sort(Ee);for(var e=[],n=0;t.length>n;n++){for(var r=t[n],a=0;e.length>a&&Ce(r,e[a]);a++);e[a]?e[a].push(r):e[a]=[r]}return e}function y(){var t,e=_(),n=[];for(t=0;e>t;t++)n[t]=I(t).find("div.fc-day-content > div");return n}function b(t,e){var n=U();Se(t,function(t,n,r){var a=t.event;a._id===e?w(a,n,t):n[0]._fci=r}),H(n,t,w)}function w(t,e,n){x(t)&&S.draggableDayEvent(t,e,n),n.isEnd&&k(t)&&S.resizableDayEvent(t,e,n),N(t,e)}function D(t,e){var n,r=te();e.draggable({delay:50,opacity:E("dragOpacity"),revertDuration:E("dragRevertDuration"),start:function(a,o){T("eventDragStart",e,t,a,o),O(t,e),r.start(function(r,a,o,i){if(e.draggable("option","revert",!r||!o&&!i),Q(),r){var s=ne(a),l=ne(r);n=g(l,s),$(c(v(t.start),n),c(C(t),n))}else n=0},a,"drag")},stop:function(a,o){r.stop(),Q(),T("eventDragStop",e,t,a,o),n?L(this,t,n,0,t.allDay,a,o):(e.css("filter",""),W(t,e))}})}function M(e,r,a){var o=E("isRTL"),i=o?"w":"e",s=r.find(".ui-resizable-"+i),l=!1;V(r),r.mousedown(function(t){t.preventDefault()}).click(function(t){l&&(t.preventDefault(),t.stopImmediatePropagation())}),s.mousedown(function(o){function s(n){T("eventResizeStop",this,e,n),t("body").css("cursor",""),u.stop(),Q(),f&&A(this,e,f,0,n),setTimeout(function(){l=!1},0)}if(1==o.which){l=!0;var u=te();_(),q();var f,d,v=r.css("top"),h=t.extend({},e),g=ie(oe(e.start));K(),t("body").css("cursor",i+"-resize").one("mouseup",s),T("eventResizeStart",this,e,o),u.start(function(r,o){if(r){var s=re(o),l=re(r);if(l=Math.max(l,g),f=ae(l)-ae(s)){h.end=c(R(e),f,!0);var u=d;d=n(h,a.row,v),d=t(d),d.find("*").css("cursor",i+"-resize"),u&&u.remove(),O(e)}else d&&(W(e),d.remove(),d=null);Q(),$(e.start,c(C(e),f))}},o)}})}var S=this;S.renderDayEvents=e,S.draggableDayEvent=D,S.resizableDayEvent=M;var E=S.opt,T=S.trigger,x=S.isEventDraggable,k=S.isEventResizable,R=S.eventEnd,F=S.reportEventElement,N=S.eventElementHandlers,W=S.showEvents,O=S.hideEvents,L=S.eventDrop,A=S.eventResize,_=S.getRowCnt,q=S.getColCnt;S.getColWidth;var I=S.allDayRow,P=S.colLeft,B=S.colRight,Y=S.colContentLeft,J=S.colContentRight;S.dateToCell;var U=S.getDaySegmentContainer,Z=S.calendar.formatDates,$=S.renderDayOverlay,Q=S.clearOverlays,K=S.clearSelection,te=S.getHoverListener,ee=S.rangeToSegments,ne=S.cellToDate,re=S.cellToCellOffset,ae=S.cellOffsetToDayOffset,oe=S.dateToDayOffset,ie=S.dayOffsetToCellOffset}function Ce(t,e){for(var n=0;e.length>n;n++){var r=e[n];if(r.leftCol<=t.rightCol&&r.rightCol>=t.leftCol)return!0}return!1}function Se(t,e){for(var n=0;t.length>n;n++){var r=t[n],a=r.element;a&&e(r,a,n)}}function Ee(t,e){return e.rightCol-e.leftCol-(t.rightCol-t.leftCol)||e.event.allDay-t.event.allDay||t.event.start-e.event.start||(t.event.title||"").localeCompare(e.event.title)}function Te(){function e(t,e,a){n(),e||(e=l(t,a)),c(t,e,a),r(t,e,a)}function n(t){f&&(f=!1,u(),s("unselect",null,t))}function r(t,e,n,r,a){f=!0,s("select",null,t,e,n,r,a)}function a(e){var a=o.cellToDate,s=o.getIsCellAllDay,l=o.getHoverListener(),f=o.reportDayClick;if(1==e.which&&i("selectable")){n(e);var d;l.start(function(t,e){u(),t&&s(t)?(d=[a(e),a(t)].sort(P),c(d[0],d[1],!0)):d=null},e),t(document).one("mouseup",function(t){l.stop(),d&&(+d[0]==+d[1]&&f(d[0],!0,t),r(d[0],d[1],!0,t))})}}var o=this;o.select=e,o.unselect=n,o.reportSelection=r,o.daySelectionMousedown=a;var i=o.opt,s=o.trigger,l=o.defaultSelectionEnd,c=o.renderSelection,u=o.clearSelection,f=!1;i("selectable")&&i("unselectAuto")&&t(document).mousedown(function(e){var r=i("unselectCancel");r&&t(e.target).parents(r).length||n(e)})}function xe(){function e(e,n){var r=o.shift();return r||(r=t("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),r[0].parentNode!=n[0]&&r.appendTo(n),a.push(r.css(e).show()),r}function n(){for(var t;t=a.shift();)o.push(t.hide().unbind())}var r=this;r.renderOverlay=e,r.clearOverlays=n;var a=[],o=[]}function ke(t){var e,n,r=this;r.build=function(){e=[],n=[],t(e,n)},r.cell=function(t,r){var a,o=e.length,i=n.length,s=-1,l=-1;for(a=0;o>a;a++)if(r>=e[a][0]&&e[a][1]>r){s=a;break}for(a=0;i>a;a++)if(t>=n[a][0]&&n[a][1]>t){l=a;break}return s>=0&&l>=0?{row:s,col:l}:null},r.rect=function(t,r,a,o,i){var s=i.offset();return{top:e[t][0]-s.top,left:n[r][0]-s.left,width:n[o][1]-n[r][0],height:e[a][1]-e[t][0]}}}function He(e){function n(t){Re(t);var n=e.cell(t.pageX,t.pageY);(!n!=!i||n&&(n.row!=i.row||n.col!=i.col))&&(n?(o||(o=n),a(n,o,n.row-o.row,n.col-o.col)):a(n,o),i=n)}var r,a,o,i,s=this;s.start=function(s,l,c){a=s,o=i=null,e.build(),n(l),r=c||"mousemove",t(document).bind(r,n)},s.stop=function(){return t(document).unbind(r,n),i}}function Re(t){t.pageX===e&&(t.pageX=t.originalEvent.pageX,t.pageY=t.originalEvent.pageY)}function Fe(t){function n(e){return a[e]=a[e]||t(e)}var r=this,a={},o={},i={};r.left=function(t){return o[t]=o[t]===e?n(t).position().left:o[t]},r.right=function(t){return i[t]=i[t]===e?r.left(t)+n(t).width():i[t]},r.clear=function(){a={},o={},i={}}}var ze={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day",resourceDay:"resource"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},Ne={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},We=t.fullCalendar={version:"1.6.4"},Oe=We.views={};
t.fn.fullCalendar=function(n){if("string"==typeof n){var a,o=Array.prototype.slice.call(arguments,1);return this.each(function(){var r=t.data(this,"fullCalendar");if(r&&t.isFunction(r[n])){var i=r[n].apply(r,o);a===e&&(a=i),"destroy"==n&&t.removeData(this,"fullCalendar")}}),a!==e?a:this}n=n||{};var i=n.eventSources||[];return delete n.eventSources,n.events&&(i.push(n.events),delete n.events),n=t.extend(!0,{},ze,n.isRTL||n.isRTL===e&&ze.isRTL?Ne:{},n),this.each(function(e,a){var o=t(a),s=new r(o,n,i);o.data("fullCalendar",s),s.render()}),this},We.sourceNormalizers=[],We.sourceFetchers=[];var Le={dataType:"json",cache:!1},Ae=1;We.addDays=c,We.cloneDate=v,We.parseDate=m,We.parseISO8601=y,We.parseTime=b,We.formatDate=w,We.formatDates=D;var _e=["sun","mon","tue","wed","thu","fri","sat"],qe=864e5,Ie=36e5,Pe=6e4,je={s:function(t){return t.getSeconds()},ss:function(t){return B(t.getSeconds())},m:function(t){return t.getMinutes()},mm:function(t){return B(t.getMinutes())},h:function(t){return t.getHours()%12||12},hh:function(t){return B(t.getHours()%12||12)},H:function(t){return t.getHours()},HH:function(t){return B(t.getHours())},d:function(t){return t.getDate()},dd:function(t){return B(t.getDate())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return t.getMonth()+1},MM:function(t){return B(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},yy:function(t){return(t.getFullYear()+"").substring(2)},yyyy:function(t){return t.getFullYear()},t:function(t){return 12>t.getHours()?"a":"p"},tt:function(t){return 12>t.getHours()?"am":"pm"},T:function(t){return 12>t.getHours()?"A":"P"},TT:function(t){return 12>t.getHours()?"AM":"PM"},u:function(t){return w(t,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(t){var e=t.getDate();return e>10&&20>e?"th":["st","nd","rd"][e%10-1]||"th"},w:function(t,e){return e.weekNumberCalculation(t)},W:function(t){return M(t)}};We.dateFormatters=je,We.applyAll=$,Oe.month=K,Oe.basicWeek=te,Oe.basicDay=ee,n({weekMode:"fixed"}),Oe.agendaWeek=ae,Oe.agendaDay=oe,n({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,slotEventOverlap:!0}),Oe.resourceDay=ye,n({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24})})(jQuery);